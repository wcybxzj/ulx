lvs端口情缘性:
基于lvs-dr实现
例子为通过GW使用client用ftp被动模式访问
=============================================================================================================
gw:
kvm
iptables -t nat -A PREROUTING  -i eth0 -d 192.168.100.254 -p tcp --dport 21 -j DNAT --to-destination  10.10.10.200:21
iptables -t nat -A PREROUTING  -i eth0 -d 192.168.100.254 -p tcp --dport 50000:60000 -j DNAT --to-destination 10.10.10.200:50000-60000
这里--to-destination后边不写端口也行
=============================================================================================================
dr:
kvm
防火墙标记
lvs规则
=============================================================================================================
realserver:
kvm
ftp上指定被动模式使用50000-60000端口
=============================================================================================================
client:
vmware
lftp 192.168.100.254
=============================================================================================================
