# hname v4.2
# by: QiaoWence  2016-7 ce9792944@gmail.com
#
# 基本功能。
# 批量修改虚拟机的ip地址，主机名,按需求添加硬盘，网卡,上传ssh-key，相互解析。
# 使用方法：
# 1.修改hname.conf配置文件，提供一个可以正常使用的,磁盘格式为qcow2的模板虚拟机，模板虚拟机需要清楚udev，uuid等唯一性标识信息，使用上传ssh-key和上传hosts解析文件时，需要提供目标主机密码。
# 2.在vhost.conf文件内编写要复制的虚拟机的信息，第一列是虚拟机名，第二列是ip地址，多个ip地址用逗号隔开，会自动根据ip地址数量增加网卡，第三列是主机名，第四列可以指定添加硬盘数量[可留空]，硬盘默认大小可以在hname.conf内设置。
# 3.使用上传ssh-key功能时，请确保物理机已使用ssh-keygen命令生成密钥对。
# 4.执行 hname.sh
# 
# vhost.conf使用格式
# ***vhost.conf暂不支持注释,每一行为一条虚拟机记录
# 虚拟机名  ip地址(多个ip用逗号分隔)  主机名  添加硬盘数量(可以为空)
# e.g.
# Qiao-1 192.168.122.11 web1.qiao.com 
# Qiao-2 192.168.122.11,10.10.10.11 web2.qiao.com 3
# Qiao-3 192.168.122.12,10.10.10.12,1.1.1.12 web3.qiao.com 2 
#
# 注意事项:
# ***模板虚拟机有多块硬盘可能会造成失败!!!
# ***模板虚拟机请务必清除udev网卡记录等唯一标识信息，否则会造成网络异常!!!
# ***使用上传ssh-key功能时，请务必手动生成ssh-key密钥对！！！
# ***"修改虚拟机环境"选项和一键部署必须要在虚拟机关机状态下使用!!!
# 使用一键部署时，因为虚拟机开机时间问题，可能导致最后个别ssh-key传入失败,特别是数量较少时，可以适当增加ssh_stime参数，如果失败只需要重新执行"上传ssh公钥"选项即可。
#
# 更新记录:
# 2.0版增加了对多网卡的支持。
# 3.0版修改了脚本结构，增加传入ssh公钥功能，增加了拷贝虚拟机功能,和一键部署功能。
# 3.2版修改了脚本结构，加入了配置文件的使用方式，所有的环境只需要在配置文件里修改即可。
# 3.4版修改了脚本执行方式，加快了脚本执行速度，可以单独使用上传ssh-key，上传hosts解析功能。
# 4.0版增加了添加硬盘，网卡的功能,可以更灵活的设置虚拟机环境。
# 4.1版修复了一些bug，完善了readme文件。
# 4.2版修复了一些bug，增加了删除虚拟机功能，修改了一键部署时，ssh-key的开机检测方式，有效提高了一键部署的成功率。
#
